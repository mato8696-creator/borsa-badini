import streamlit as st
import requests

st.set_page_config(page_title="Ø¨Û†Ú•Ø³Ø§ Ø¯Ù‡Û†Ú©", page_icon="ğŸ’°")

st.title("ğŸ’° Ø¨Û†Ú•Ø³Ø§ Ù…Û•ØªÛŒÙ† (Ø¯Ù‡Û†Ú©)")
st.subheader("Ø¨Ù‡Ø§ÛŒÛ Ø¯Û†Ù„Ø§Ø±ÛŒ Ù„ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û Ø¨ Ø´ÛÙˆÛ•ÛŒÛ•Ú©Û Ø¦Û†ØªÛ†Ù…Ø§ØªÛŒÚ©")

st.write("---")
st.markdown("### ğŸ‘¤ Ú¯Û•Ø´Û•Ù¾ÛØ¯Û•Ø±: Ù…Û•ØªÛŒÙ† Ø¹Ø¯Ù†Ø§Ù† Ù…Ø­Ù…Ø¯")
st.link_button("âœˆï¸ Ù†Ø§Ø±Ø¯Ù†Ø§ Ù†Ø§Ù…Û•ÛŒÛ Ø¨ ØªÛÙ„Û•Ú¯Ø±Ø§Ù…Û", "https://t.me/badinimatin")
st.write("---")

try:
    # ÙˆÛ•Ø±Ú¯Ø±ØªÙ†Ø§ Ø¨Ù‡Ø§ÛŒÛ ÙÛ•Ø±Ù…ÛŒ Ú˜ API
    url = "https://api.exchangerate-api.com/v4/latest/USD"
    data = requests.get(url).json()
    base_rate = data['rates']['IQD']
    
    # Ù…Û• Ø¨Ù‡Ø§ÛŒÛ Ø¯Ù‡Û†Ú©Û ÛŒÛ Ø¦Û†ØªÛ†Ù…Ø§ØªÛŒÚ© Ø¯Ø±ÙˆØ³Øª Ú©Ø± (ÙÛ•Ø±Ù…ÛŒ + Ù¡Ù¥Ù§.Ù¥ Ø¯ÛŒÙ†Ø§Ø±)
    # Ø¦Û•Ú¤Û• Ø¯Û Ø¨Ù‡Ø§ÛŒÛ Ù¡Ù£Ù¡Ù  Ú©Û•ØªÛ• Ù†ÛØ²ÛŒÚ©ÛŒ Ù¡Ù¤Ù¦ØŒÙ§Ù¥Ù 
    dhok_rate = base_rate + 157.5
    
    # Ù†ÛŒØ´Ø§Ù†Ø¯Ø§Ù†Ø§ Ø¦Û•Ù†Ø¬Ø§Ù…ÛŒ
    st.metric(label="Ø¨Ù‡Ø§ÛŒÛ Ù¡ Ø¯Û†Ù„Ø§Ø±ÛŒ Ù„ Ø¯Ù‡Û†Ú©Û (Ù†ÛØ²ÛŒÚ©Û•ÛŒÛŒ)", value=f"{dhok_rate:,.2f} IQD")
    
    st.write("---")
    
    # Ø­Ø§Ø³ÛŒØ¨Û•ÛŒÛ Ù¡Ù Ù  Ø¯Û†Ù„Ø§Ø±ÛŒ Ø¨ ØªØ§ÛŒØ¨Û•Øª
    st.markdown("### ğŸ§® Ø­Ø§Ø³ÛŒØ¨Û•ÛŒÛ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û")
    amount = st.number_input("Ú†Û•Ù†Ø¯ Ø¯Û†Ù„Ø§Ø± ØªÛ• Ù‡Û•Ù†Û•ØŸ", value=100.0)
    total = amount * dhok_rate
    
    st.success(f"Ø¨Ù‡Ø§ÛŒÛ {amount:,} Ø¯Û†Ù„Ø§Ø±Ø§Ù† Ø¨ Ø¯ÛŒÙ†Ø§Ø±Û Ø¯Ù‡Û†Ú©Û: **{total:,.0f}** Ø¯ÛŒÙ†Ø§Ø±")

except:
    st.error("Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒ Ø¨ Ø³ÛØ±Ú¤Û•Ø±ÛŒ Ú¤Û• Ù†Û•Ù…Ø§!")

st.info("ØªÛØ¨ÛŒÙ†ÛŒ: Ø¦Û•Ú¤ Ø¨Ù‡Ø§ÛŒÛ• Ø¨ Ø´ÛÙˆÛ•ÛŒÛ•Ú©Û Ø²ÛŒØ±Û•Ú© Ø¯Ù‡ÛØªÛ• Ø®Û•Ù…Ù„Ø§Ù†Ø¯Ù† Ø¯Ø§ ÙˆÛ•Ú©ÛŒ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û Ø¨ÛŒØª.")
