import streamlit as st
import requests

st.set_page_config(page_title="Ø¨Û†Ú•Ø³Ø§ Ø¯Ù‡Û†Ú©", page_icon="ğŸ’°")

st.title("ğŸ’° Ø¨Û†Ú•Ø³Ø§ Ù…Û•ØªÛŒÙ† (Ø¯Ù‡Û†Ú©)")
st.subheader("Ø¨Ù‡Ø§ÛŒÛ Ø¯Û†Ù„Ø§Ø±ÛŒ Ù„ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û Ø¨ Ø´ÛÙˆÛ•ÛŒÛ•Ú©Û Ø¦Û†ØªÛ†Ù…Ø§ØªÛŒÚ©")

st.write("---")
st.markdown("### ğŸ‘¤ Ú¯Û•Ø´Û•Ù¾ÛØ¯Û•Ø±: Ù…Û•ØªÛŒÙ† Ø¹Ø¯Ù†Ø§Ù† Ù…Ø­Ù…Ø¯")

# Ù„ Ú¤ÛØ±Û• Ù„ÛŒÙ†Ú©Û ØªÛÙ„Û•Ú¯Ø±Ø§Ù…ÛŒ ÛŒÛ Ù„Û Ù‡Û•ÛŒ:
st.link_button("âœˆï¸ Ù†Ø§Ø±Ø¯Ù†Ø§ Ù†Ø§Ù…Û•ÛŒÛ Ø¨ ØªÛÙ„Û•Ú¯Ø±Ø§Ù…Û", "https://t.me/badinimatin")
st.write("---")

try:
    # ÙˆÛ•Ø±Ú¯Ø±ØªÙ†Ø§ Ø¨Ù‡Ø§ÛŒÛ ÙÛ•Ø±Ù…ÛŒ
    url = "https://api.exchangerate-api.com/v4/latest/USD"
    data = requests.get(url).json()
    base_rate = data['rates']['IQD']
    
    # Ú•ÛÚ©Ø®Ø³ØªÙ†Ø§ Ø¨Ù‡Ø§ÛŒÛŒ Ø¯Ø§ ÙˆÛ•Ú©ÛŒ ÛŒÛ Ø¯Ù‡Û†Ú©Û Ù„Û Ø¨Ù‡ÛØª (Ù¡Ù¤Ù¦ØŒÙ§Ù¥Ù )
    dhok_rate = base_rate + 157.5
    
    st.metric(label="Ø¨Ù‡Ø§ÛŒÛ Ù¡ Ø¯Û†Ù„Ø§Ø±ÛŒ Ù„ Ø¯Ù‡Û†Ú©Û (Ù†ÛØ²ÛŒÚ©Û•ÛŒÛŒ)", value=f"{dhok_rate:,.2f} IQD")
    
    st.write("---")
    
    # Ø­Ø§Ø³ÛŒØ¨Û•
    st.markdown("### ğŸ§® Ø­Ø§Ø³ÛŒØ¨Û•ÛŒÛ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û")
    amount = st.number_input("Ú†Û•Ù†Ø¯ Ø¯Û†Ù„Ø§Ø± ØªÛ• Ù‡Û•Ù†Û•ØŸ", value=100.0)
    total = amount * dhok_rate
    
    st.success(f"Ø¨Ù‡Ø§ÛŒÛ {amount:,} Ø¯Û†Ù„Ø§Ø±Ø§Ù† Ø¨ Ø¯ÛŒÙ†Ø§Ø±Û Ø¯Ù‡Û†Ú©Û: **{total:,.0f}** Ø¯ÛŒÙ†Ø§Ø±")

except:
    st.error("Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒ Ø¨ Ø³ÛØ±Ú¤Û•Ø±ÛŒ Ú¤Û• Ù†Û•Ù…Ø§!")

st.info("Ø¦Û•Ú¤ Ø³Ø§ÛŒØªÛ• Ø¨ Ø´ÛÙˆÛ•ÛŒÛ•Ú©Û Ø²ÛŒØ±Û•Ú© Ø¯Ù‡ÛØªÛ• Ø®Û•Ù…Ù„Ø§Ù†Ø¯Ù† Ø¯Ø§ ÙˆÛ•Ú©ÛŒ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û Ø¨ÛŒØª.")
