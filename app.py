import streamlit as st
import requests

# Ù¡. Ú•ÛÚ©Ø®Ø³ØªÙ†Ø§ Ù„Ø§Ù¾Û•Ú•Û•ÛŒ
st.set_page_config(page_title="Ø¨Û†Ú•Ø³Ø§ Ø¯Ù‡Û†Ú©", page_icon="ğŸ“Š")

st.title("ğŸ“Š Ø³ÛŒØ³ØªÛ•Ù…Û Ø¨Û†Ú•Ø³Ø§ Ø¯Ù‡Û†Ú© (Ù…Û•ØªÛŒÙ† Ø¹Ø¯Ù†Ø§Ù†)")
st.write("Ø¨Ø®ÛØ± Ø¨ÛÛŒ! Ù‡Û•Ù†Ú¯Ø§Ú¤Ø§ Ø®Û† Ù‡Û•Ù„Ø¨Ú˜ÛØ±Û•:")

# Ù¢. ÙˆÛ•Ø±Ú¯Ø±ØªÙ†Ø§ Ø¨Ù‡Ø§ÛŒÛ Ù†ÙˆÙˆ
try:
    url = "https://api.exchangerate-api.com/v4/latest/USD"
    data = requests.get(url).json()
    base_rate = data['rates']['IQD']
    dhok_rate = base_rate + 157.5 # Ø¨Ù‡Ø§ÛŒÛ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û
except:
    dhok_rate = 1467.50 # Ø¨Ù‡Ø§ÛŒÛ Ù¾Ø´ØªÛŒÚ¯Ø±ÛŒ Ø¦Û•Ú¯Û•Ø± Ø¦ÛŒÙ†ØªÛ•Ø±Ù†ÛØª Ù†Û•Ø¨ÙˆÙˆ

# Ù£. Ù‡Û•Ù†Ú¯Ø§Ú¤Ø§ Ø¦ÛÚ©Û: Ù‡Û•Ù„Ø¨Ú˜Ø§Ø±ØªÙ†Ø§ Ú©Ø§Ø±Û Ø³Û•Ø±Û•Ú©ÛŒ
step1 = st.radio(
    "Ù¡. Ú† ØªÛ• Ø¯Ú¤ÛØª Ø¨Ú©Û•ÛŒØŸ",
    ["Ø¨ÛŒÙ†ÛŒÙ†Ø§ Ø¨Ù‡Ø§ÛŒÛ Ø¦Û•Ú¤Ú•Û†", "Ø­Ø§Ø³ÛŒØ¨Û•ÛŒÛ Ø¯Û†Ù„Ø§Ø±ÛŒ (Ø¨Û† Ø¯ÛŒÙ†Ø§Ø±ÛŒ)"]
)

st.write("---")

# Ù¤. Ø¬ÛØ¨Û•Ø¬ÛÚ©Ø±Ù†Ø§ Ø¨Ú•ÛŒØ§Ø±Û
if step1 == "Ø¨ÛŒÙ†ÛŒÙ†Ø§ Ø¨Ù‡Ø§ÛŒÛ Ø¦Û•Ú¤Ú•Û†":
    st.subheader("Ø¨Ù‡Ø§ÛŒÛ Ù†ÙˆÚ©Û• Ù„ Ø¨Ø§Ø²Ø§Ø±Û Ø¯Ù‡Û†Ú©Û:")
    st.info(f"ğŸ’µ 100 Ø¯Û†Ù„Ø§Ø± = {dhok_rate * 100:,.0f} Ø¯ÛŒÙ†Ø§Ø±")
    st.metric(label="Ø¨Ù‡Ø§ÛŒÛ Ù¡ Ø¯Û†Ù„Ø§Ø±ÛŒ", value=f"{dhok_rate:,.2f} IQD")

elif step1 == "Ø­Ø§Ø³ÛŒØ¨Û•ÛŒÛ Ø¯Û†Ù„Ø§Ø±ÛŒ (Ø¨Û† Ø¯ÛŒÙ†Ø§Ø±ÛŒ)":
    st.subheader("ğŸ§® Ø­Ø§Ø³ÛŒØ¨Û•ÛŒÛ Ø¯Ù‡Û†Ú©Û")
    
    # Ù‡Û•Ù†Ú¯Ø§Ú¤Ø§ Ø¯ÙˆÙˆÛ: Ø¯Û•Ø³ØªÙ†ÛŒØ´Ø§Ù†Ú©Ø±Ù†Ø§ Ø¨Ú•ÛŒ
    option = st.selectbox("Ù¢. Ø¨Ú•Û Ù¾Ø§Ø±Û•ÛŒ Ù‡Û•Ù„Ø¨Ú˜ÛØ±Û•:", ["100 Ø¯Û†Ù„Ø§Ø±", "Ø¨Ú•Û•Ú©Û Ø¯ÛŒ Ø¨Ù†Ú¤ÛŒØ³Û•"])
    
    if option == "100 Ø¯Û†Ù„Ø§Ø±":
        usd_amount = 100.0
    else:
        usd_amount = st.number_input("Ø¨Ú•Û Ø¯Û†Ù„Ø§Ø±Ø§Ù† Ø¨Ù†Ú¤ÛŒØ³Û•:", min_value=1.0, value=100.0)
    
    # Ù‡Û•Ù†Ú¯Ø§Ú¤Ø§ Ø³ÛÛŒÛ: Ù†ÛŒØ´Ø§Ù†Ø¯Ø§Ù†Ø§ Ø¦Û•Ù†Ø¬Ø§Ù…ÛŒ
    total_iqd = usd_amount * dhok_rate
    st.success(f"âœ… Ø¦Û•Ù†Ø¬Ø§Ù…: {usd_amount:,} Ø¯Û†Ù„Ø§Ø± Ø¯Ø¨ÛŒØªÛ• **{total_iqd:,.0f}** Ø¯ÛŒÙ†Ø§Ø±")

st.write("---")
st.link_button("âœˆï¸ Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒ Ø¨ ØªÛÙ„Û•Ú¯Ø±Ø§Ù…Û", "https://t.me/badinimatin")
